(function(e){function t(t){for(var r,s,i=t[0],c=t[1],u=t[2],d=0,m=[];d<i.length;d++)s=i[d],a[s]&&m.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(m.length)m.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"058d":function(e,t,n){},"0922":function(e,t,n){},"0d26":function(e,t,n){"use strict";var r=n("3d47"),a=n.n(r);a.a},1:function(e,t){},"12cb":function(e,t,n){},2:function(e,t){},"210a":function(e,t,n){"use strict";var r=n("9db1"),a=n.n(r);a.a},2603:function(e,t,n){"use strict";var r=n("c3f8"),a=n.n(r);a.a},3:function(e,t){},"3d47":function(e,t,n){},"458f":function(e,t,n){},4678:function(e,t,n){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="4678"},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")},o=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000","enable-background":"new 0 0 1000 1000","xml:space":"preserve"}},[n("g",[n("g",{attrs:{transform:"translate(0.000000,511.000000) scale(0.100000,-0.100000)"}},[n("path",{attrs:{d:"M5893.9,4979.4c-128.7-41.4-242.1-111.2-333.7-207.2c-37.1-41.4-325-475.4-641.2-968.3c-314.1-490.7-940-1467.8-1389.3-2170.1c-449.3-702.3-835.3-1310.8-859.3-1354.4c-21.8-43.6-52.3-139.6-65.4-211.5c-56.7-301,122.1-647.8,407.8-793.9c37.1-19.6,250.8-85,477.6-143.9c224.6-61.1,414.4-115.6,418.8-120c6.5-4.4-163.6-652.1-375.1-1435.1c-355.5-1310.8-386-1441.6-388.2-1611.7c0-154.8,8.7-205,56.7-309.7c220.3-475.4,857.1-595.4,1212.6-229C4546-4442.3,7333.3-193.8,7376.9-60.8c26.2,76.3,32.7,157,26.2,285.7c-6.5,148.3-19.6,198.5-82.9,316.2c-76.3,143.9-213.7,272.6-344.6,327.1c-37.1,15.3-257.4,80.7-488.5,144c-231.2,63.2-418.8,122.1-418.8,133c2.2,10.9,183.2,687,401.3,1502.7c390.4,1450.4,396.9,1485.2,388.2,1657.5c-10.9,207.2-72,342.4-215.9,486.3C6450,4981.6,6140.3,5057.9,5893.9,4979.4z M6190.5,4344.8c21.8-19.6,39.2-61.1,39.2-91.6c0-30.5-211.6-846.2-468.9-1810.2c-259.5-964-466.7-1757.9-460.2-1762.2c4.4-4.4,301-87.2,658.7-183.2c359.9-96,682.7-183.2,721.9-196.3c69.8-21.8,93.8-56.7,93.8-133c0-58.9-2763.3-4263.8-2830.9-4309.6c-63.3-41.4-150.5-8.7-167.9,67.6c-8.7,30.5,159.2,693.5,444.9,1764.4c253,942.2,460.2,1727.3,460.2,1744.8c0,19.6-189.7,78.5-647.7,200.7c-357.7,96-680.5,185.4-719.7,200.7c-152.7,61.1-209.4-39.3,1269.3,2270.4c752.4,1173.3,1391.5,2165.7,1419.8,2205C6064,4390.6,6127.3,4401.5,6190.5,4344.8z"}})])])])},i=[],c={},u=c,l=n("2877"),d=Object(l["a"])(u,s,i,!1,null,null,null),m=d.exports;r["a"].component("Bolt",m);var p={},h=p,v=(n("5c0b"),Object(l["a"])(h,a,o,!1,null,null,null)),f=v.exports,g=n("8c4f"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"play-layout"},[n("router-link",{attrs:{to:"/test"}},[e._v("Home")]),n("br"),n("br"),n(e.page,{tag:"component"})],1)},w=[],k={props:["page"],data:function(){return{show:!0}},methods:{}},x=k,R=Object(l["a"])(x,b,w,!1,null,null,null),C=R.exports,j=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},_=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"play-client"},[n("div",{staticClass:"client"})])}],y={mounted:function(){Silverchat.init({roomId:this.$route.params.socketRoomId,selector:".client"})}},S=y,N=Object(l["a"])(S,j,_,!1,null,"046dacbb",null),O=N.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isDataReady?n("section",[n("div",[e._v("ADMIN - Room is "+e._s(e.room.name))]),n("h3",[e._v("Waiting clients:")]),e._l(e.convos,(function(t){return n("div",[e._v(e._s(t.clientId)+" "+e._s(t.state)+" "+e._s(t.adminId))])})),n("h3",[e._v("Connected admins:")]),e._l(e.room.admins,(function(t){return n("div",[e._v(e._s(t))])})),n("br"),n("br"),n("br"),n("br"),n("br"),null==e.store.connectedRoom?n("div",[n("p",[e._v("You haven't joined a room")]),n("button",{on:{click:function(t){return e.joinRoom()}}},[e._v("Join Room")])]):n("div",[n("p",[e._v("You have joined the room "+e._s(e.store.connectedRoom.name))]),n("button",{on:{click:function(t){return e.leaveRoom()}}},[e._v("Leave Room")]),null==e.store.connectedConvo?n("div",[n("p",[e._v("Not having any conversation")]),e.waitingConvos.length>0?n("div",[n("p",[e._v("Someone is Waiting !")]),n("button",{on:{click:function(t){e.recordVideo=!1,e.nextConvo()}}},[e._v("Join With CALL")]),n("button",{on:{click:function(t){e.recordVideo=!0,e.nextConvo()}}},[e._v("Join With VIDEO")])]):e._e()]):n("div",[n("video",{attrs:{muted:"muted",playsinline:"playsinline"},domProps:{muted:!0}}),n("p",[e._v("You are having conversation with: "+e._s(e.store.connectedConvo.clientId))]),n("button",{on:{click:function(t){return e.endConvo()}}},[e._v("End Conversation")]),0==e.hasAcceptedCall?n("div",[n("button",{on:{click:function(t){e.recordVideo=!1,e.answerCall()}}},[e._v("Reconnect to CALL !")]),n("button",{on:{click:function(t){e.recordVideo=!0,e.answerCall()}}},[e._v("Reconnect to VIDEO !")])]):n("div",[n("p",[e._v(e._s(e.recordVideo?"Your Camera is ON":"Your Camera is OFF"))]),n("button",{on:{click:function(t){e.recordVideo=!e.recordVideo,e.updateUserMediaStream()}}},[e._v(e._s(e.recordVideo?"Turn Video OFF":"Turn Video ON"))])])])])],2):e._e()},I=[],P=n("6ee6"),A=n("f499"),D=n.n(A),M=n("768b"),E=n("795b"),V=n.n(E),$=(n("ac6a"),n("06db"),n("5df3"),n("96cf"),n("3b8d")),G=n("bc3a"),U=n.n(G),z=n("8ded"),L=n.n(z),q="https://api.silverchat.co/",F=n("8055")(q+"play",{rejectUnauthorized:!1});function W(){return F.id}function Y(e,t){return J.apply(this,arguments)}function J(){return J=Object($["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(q+t,n,{headers:{Authorization:L.a.get("authToken")}});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e["catch"](0),console.log("e: ",e.t0),401===e.t0.response.status&&(L.a.remove("authToken"),window.location="/login",console.log("path: "+t),console.log("data: "+n)),e.t0;case 12:return e.abrupt("return",res.data);case 13:case"end":return e.stop()}}),e,null,[[0,7]])}))),J.apply(this,arguments)}function H(e,t){return B.apply(this,arguments)}function B(){return B=Object($["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new V.a((function(e){F.emit(t,n,L.a.get("authToken"),(function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}function Q(e,t){F.on(e,t)}var K=n("051a"),X=n.n(K),Z=(n("d093"),n("c1df")),ee=n.n(Z),te=null,ne={iceServers:[{urls:["stun:ss-turn1.xirsys.com"]},{urls:"turn:104.248.158.23:3478",credential:"gsFu3kkpFB2aMWih",username:"Silverchat"}]},re=null,ae={data:function(){return{isDataReady:!1,newRoomName:"",room:null,convos:[],incomingSignal:null,recordVideo:!1,recordAudio:!0,socketConnectedToRoom:!1,socketConnectedToConvo:!1,isConnectionEstablished:!1,hasAcceptedCall:!1,lastClientSeed:null,connectedSeed:null,mySeed:null,clientSocketId:null,mySignals:[],lastPeerSetupDate:null}},created:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.logAsGuestIf();case 2:return this.socketSetup(),e.next=5,this.fetchAllData();case 5:return e.next=7,V.a.all([this.socketConnectToRoom(),this.socketConnectToConvo()]);case 7:this.isDataReady=!0;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{fetchAllData:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V.a.all([this.storeConnectedRoom(),Y("admin/get-room",{socketRoomId:this.socketRoomId})]);case 2:t=e.sent,n=Object(M["a"])(t,2),n[0],r=n[1],a=r.room,o=r.convos,this.room=a,this.convos=o;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),socketConnectToRoom:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==this.store.connectedRoom||0!=this.socketConnectedToRoom){e.next=3;break}return this.socketConnectedToRoom=!0,e.abrupt("return",H("admin/join-room",{}));case 3:return e.abrupt("return",V.a.resolve());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),socketConnectToConvo:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==this.store.connectedConvo||0!=this.socketConnectedToConvo){e.next=3;break}return this.socketConnectedToConvo=!0,e.abrupt("return",H("setup-convos",{}));case 3:return e.abrupt("return",V.a.resolve());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),simplePeerSetup:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(null==this.lastPeerSetupDate||ee()()-this.lastPeerSetupDate>2e3)){e.next=4;break}this.lastPeerSetupDate=ee()(),e.next=5;break;case 4:return e.abrupt("return");case 5:return this.mySeed=Math.round(1e6*Math.random()),console.log("My Seed: ",this.mySeed),this.lastClientSeed=null,this.connectedSeed=null,this.mySignals=[],this.isConnectionEstablished=!1,null!=te&&te.destroy(),e.prev=12,e.next=15,navigator.mediaDevices.getUserMedia({video:this.recordVideo,audio:this.recordAudio});case 15:re=e.sent,e.next=24;break;case 18:return e.prev=18,e.t0=e["catch"](12),console.log("e: ",e.t0),e.next=23,navigator.mediaDevices.getUserMedia({video:!1,audio:!0});case 23:re=e.sent;case 24:te=new X.a({initiator:!0,trickle:!0,stream:re,config:ne}),te.on("stream",(function(e){console.log("receiving the vid");var t=document.querySelector("video");"srcObject"in t?t.srcObject=e:t.src=window.URL.createObjectURL(e),t.play(),t.muted=!1})),te.on("error",(function(e){return console.log("peer error: ",e)})),te.on("signal",function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("MY SIGNAL:  ",D()(n)),t.mySignals.push(n),1!=t.socketConnectedToConvo){e.next=5;break}return e.next=5,H("transmit-signal",{signal:n,seed:t.mySeed,senderSocketId:W()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),te.on("connect",(function(){console.log("I'M CONNECTED !")})),te.on("close",Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("CONNECTION WAS CLOSED !!"),e.next=3,t.simplePeerSetup();case 3:case"end":return e.stop()}}),e)}))));case 30:case"end":return e.stop()}}),e,this,[[12,18]])})));function t(){return e.apply(this,arguments)}return t}(),updateUserMediaStream:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{te.removeStream(re)}catch(n){re=null}finally{setTimeout(Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:t.recordVideo,audio:t.recordAudio});case 2:re=e.sent,console.log("new stream: ",re),e.prev=4,te.addStream(re),e.next=13;break;case 8:return e.prev=8,e.t0=e["catch"](4),e.next=12,t.simplePeerSetup();case 12:console.log("RESETING LAST RESORT: ");case 13:case"end":return e.stop()}}),e,null,[[4,8]])}))),10)}case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),emitStoredSignals:function(){if(console.log("emit my stored signals: ",this.mySignals.length),0!=this.mySignals.length)for(var e=0;e<this.mySignals.length;++e){var t=this.mySignals[e];H("transmit-signal",{signal:t,seed:this.mySeed,senderSocketId:W()})}},socketSetup:function(){var e=this;Q("admin/request-for-signal",function(){var t=Object($["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(P["a"])(n),console.log("receiving request-for-signal"),1!=e.isConnectionEstablished){t.next=8;break}return console.log("connection already established, reconstructing peer"),t.next=6,e.simplePeerSetup();case 6:t.next=9;break;case 8:e.emitStoredSignals();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Q("admin/emit-signal",function(){var t=Object($["a"])(regeneratorRuntime.mark((function t(n){var r,a,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=n.signal,a=n.seed,o=n.returnSeed,s=n.senderSocketId,console.log("returnSeed: ",o),o==e.mySeed){t.next=5;break}return console.log("Unknown return Seed"),t.abrupt("return");case 5:if(console.log("OTHER SIGNAL: ",r),console.log("seed: ",a),console.log("this.connectedSeed: ",e.connectedSeed),e.lastClientSeed=a,e.clientSocketId=s,e.connectedSeed!=a){t.next=15;break}console.log("CONCAT NEW SIGNAL"),te.signal(r),t.next=24;break;case 15:if(1!=e.isConnectionEstablished){t.next=21;break}return console.log("connection already established, reconstructing peer"),t.next=19,e.simplePeerSetup();case 19:t.next=24;break;case 21:console.log("FIRST SIGNAL"),e.incomingSignal=r,e.tryConnectIncomingSignal();case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Q("admin/notify-new-convo",(function(t){var n=t.convo;console.log("NEW CONVO: ",n),e.convos.push(n)})),Q("user-disconnected",(function(e){var t=e.id;console.log("THIS SOCKET ID DISCONNECTED: ",t)}))},tryConnectIncomingSignal:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:1==this.hasAcceptedCall&&null!=this.incomingSignal&&(te.signal(this.incomingSignal),this.isConnectionEstablished=!0,this.incomingSignal=null,this.connectedSeed=this.lastClientSeed);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),joinRoom:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y("admin/join-room",{socketRoomId:this.socketRoomId});case 2:return e.next=4,this.fetchAllData();case 4:return e.next=6,this.socketConnectToRoom();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),endConvo:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y("admin/end-convo",{});case 2:location.reload();case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),nextConvo:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.simplePeerSetup();case 2:return e.next=4,Y("admin/next-convo",{});case 4:return e.next=6,this.fetchAllData();case 6:return this.hasAcceptedCall=!0,e.next=9,this.socketConnectToConvo();case 9:this.emitStoredSignals();case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),leaveRoom:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y("admin/leave-room",{});case 2:return e.next=4,this.fetchAllData();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),answerCall:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.simplePeerSetup();case 2:this.hasAcceptedCall=!0;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},computed:{socketRoomId:function(){return this.$route.params.socketRoomId},waitingConvos:function(){return this.convos.filter((function(e){return"waiting"==e.state}))}}},oe=ae,se=Object(l["a"])(oe,T,I,!1,null,"ac2d59e6",null),ie=se.exports,ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",[e._v("WebSocket Monitor")])},ue=[],le=(n("28a5"),{created:function(){console.log("suo bro");var e="https://".concat(location.host.split(":")[0],":4000/"),t=n("8055")(e+"ws-monitor",{rejectUnauthorized:!1});t.on("snapshot",(function(e){console.log("snapshot data: ",e)}))}}),de=le,me=Object(l["a"])(de,ce,ue,!1,null,"00d482f8",null),pe=me.exports,he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isDataReady?n("div",{staticClass:"verify"},[n("div",{staticClass:"text"},[n("b",[e._v(e._s(e.user.firstName))]),e._v(", you are invited to join "),n("b",[e._v(e._s(null!=e.team?e.team.name:"Silverchat Admin"))]),n("br"),null!=e.user.role?n("span",[e._v("Role: "+e._s(e.user.role)+" "),n("br")]):e._e()]),n("div",{staticClass:"text"},[e._v("Please create your password")]),n("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",id:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("label",{attrs:{for:"password"}},[e._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.repeatPassword,expression:"repeatPassword"}],attrs:{type:"password",id:"repeatPassword"},domProps:{value:e.repeatPassword},on:{input:function(t){t.target.composing||(e.repeatPassword=t.target.value)}}}),n("label",{attrs:{for:"repeatPassword"}},[e._v("Repeat Password")]),n("button",{attrs:{type:"submit"}},[e._v("Submit")])])]):null!=e.errorMessage?n("div",{staticClass:"error"},[e._v(e._s(e.errorMessage))]):e._e()},ve=[],fe={data:function(){return{user:null,team:null,isDataReady:!1,password:"",repeatPassword:"",errorMessage:null}},created:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y("get-info-from-verif-token",{verificationToken:this.$route.params.verificationToken});case 3:t=e.sent,n=t.user,r=t.team,this.user=n,this.team=r,this.isDataReady=!0,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),this.errorMessage=e.t0.response.data;case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}(),methods:{submit:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.password==this.repeatPassword&&null!=this.password){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Y("verify",{verificationToken:this.$route.params.verificationToken,password:this.password});case 4:return e.next=6,Y("login",{email:this.user.email,password:this.password});case 6:t=e.sent,n=t.authToken,console.log("authToken: ",n),L.a.set("authToken",n),this.$router.push("/");case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},ge=fe,be=(n("8a2d"),Object(l["a"])(ge,he,ve,!1,null,"5ef98538",null)),we=be.exports,ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[e._v("sup brah"),n("div",{staticClass:"create"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newRoomName,expression:"newRoomName"}],domProps:{value:e.newRoomName},on:{input:function(t){t.target.composing||(e.newRoomName=t.target.value)}}}),n("button",{on:{click:function(t){return e.clickCreateNewRoom()}}},[e._v("Create New")])]),n("div",{staticClass:"list"},e._l(e.rooms,(function(t){return n("div",{staticClass:"item"},[n("router-link",{attrs:{to:"play/"+t.socketRoomId+"/client/preview"}},[e._v(e._s(t.socketRoomId))]),e._v(" "),n("router-link",{attrs:{to:"play/"+t.socketRoomId+"/admin"}},[e._v("_@")])],1)})),0)])},xe=[],Re={data:function(){return{newRoomName:"",rooms:[]}},created:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.logAsGuestIf();case 2:return e.next=4,this.fetchAllData();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{clickCreateNewRoom:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y("create-room",{name:this.newRoomName});case 2:return e.next=4,this.fetchAllData();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchAllData:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y("list-rooms");case 2:t=e.sent,n=t.rooms,this.rooms=n;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},Ce=Re,je=Object(l["a"])(Ce,ke,xe,!1,null,"3b7533c6",null),_e=je.exports,ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isDataReady?n("div",{staticClass:"admin-layout"},[n("div",[n("router-link",{attrs:{to:"/admin"}},[e._v("Admin Space ")]),e._v("- Welcome "+e._s(e.store.user.firstName)),n("div",{staticClass:"nav-item",on:{click:e.logout}},[e._v("Logout")]),n(e.page,{tag:"component"})],1)]):e._e()},Se=[],Ne={props:["page"],data:function(){return{isDataReady:!1}},created:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.storeMyProfile();case 2:console.log("user: ",this.store.user),null!=this.store.user&&1==this.store.user.isAdmin||this.$router.push("/login"),this.isDataReady=!0;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{logout:function(){this.logoutUser()}}},Oe=Ne,Te=(n("6d25"),Object(l["a"])(Oe,ye,Se,!1,null,"34d48038",null)),Ie=Te.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dashboard"},[n("h2",[e._v("Teams")]),n("div",{staticClass:"teams"},e._l(e.teams,(function(t){return n("div",{staticClass:"team"},[n("router-link",{attrs:{to:"/admin/teams/"+t._id}},[e._v(e._s(t.name))])],1)})),0),n("input",{directives:[{name:"model",rawName:"v-model",value:e.teamName,expression:"teamName"}],attrs:{placeholder:"name"},domProps:{value:e.teamName},on:{input:function(t){t.target.composing||(e.teamName=t.target.value)}}}),n("button",{on:{click:e.createTeam}},[e._v("Create Team")]),n("h2",[e._v("Demos")]),n("router-link",{attrs:{to:"/admin/demo/booking"}},[e._v("Booking Demo")]),n("h2",[e._v("Admins")]),n("div",{staticClass:"admins"},e._l(e.admins,(function(t){return n("div",{staticClass:"admin"},[e._v(e._s(t.firstName)+" "+e._s(t.lastName)+" "+e._s(t.email)+" "+e._s(t.isVerified?"":"-UNVERIFIED-")),n("button",{on:{click:function(n){return e.deleteUser(t)}}},[e._v("delete")])])})),0),n("h3",[e._v("Invite new Admin")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{placeholder:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.firstName,expression:"firstName"}],attrs:{placeholder:"first name"},domProps:{value:e.firstName},on:{input:function(t){t.target.composing||(e.firstName=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.lastName,expression:"lastName"}],attrs:{placeholder:"last name"},domProps:{value:e.lastName},on:{input:function(t){t.target.composing||(e.lastName=t.target.value)}}}),n("button",{on:{click:e.inviteAdmin}},[e._v("Invite Admin")])],1)},Ae=[],De={data:function(){return{email:"",firstName:"",lastName:"",admins:[],teamName:"",teams:[]}},created:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V.a.all([this.getAdmins(),this.getTeams()]);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{inviteAdmin:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y("admin/invite-admin",{email:this.email,firstName:this.firstName,lastName:this.lastName});case 2:return this.email="",this.firstName="",this.lastName="",e.next=7,this.getAdmins();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createTeam:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y("create-team",{name:this.teamName});case 2:return this.teamName="",e.next=5,this.getTeams();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getAdmins:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y("admin/get-admins");case 2:t=e.sent,n=t.users,this.admins=n;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getTeams:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y("admin/get-teams");case 2:t=e.sent,n=t.teams,this.teams=n;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deleteUser:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("Gael"!=t.firstName&&"Julius"!=t.firstName){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Y("admin/delete-user",{id:t._id});case 4:return e.next=6,this.getAdmins();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},Me=De,Ee=(n("b66f"),Object(l["a"])(Me,Pe,Ae,!1,null,"2898c1a8",null)),Ve=Ee.exports,$e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isDataReady?n("div",{staticClass:"team"},[n("h2",[e._v(e._s(e.team.name))]),n("div",{staticClass:"users"},e._l(e.users,(function(t){return n("div",{staticClass:"user"},[n("b",[e._v(e._s(t.firstName)+" "+e._s(t.lastName))]),e._v(" "+e._s(t.email)+" "),n("i",[e._v("(Verified: "+e._s(t.isVerified?"YES":"NO")+")")])])})),0),n("h3",[e._v("Invite new Member")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{placeholder:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.firstName,expression:"firstName"}],attrs:{placeholder:"first name"},domProps:{value:e.firstName},on:{input:function(t){t.target.composing||(e.firstName=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.lastName,expression:"lastName"}],attrs:{placeholder:"last name"},domProps:{value:e.lastName},on:{input:function(t){t.target.composing||(e.lastName=t.target.value)}}}),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"role"}],attrs:{type:"radio",id:"member",value:"member"},domProps:{checked:e._q(e.role,"member")},on:{change:function(t){e.role="member"}}}),n("label",{attrs:{for:"member"}},[e._v("Member")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"role"}],attrs:{type:"radio",id:"manager",value:"manager"},domProps:{checked:e._q(e.role,"manager")},on:{change:function(t){e.role="manager"}}}),n("label",{attrs:{for:"manager"}},[e._v("Manager")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"role"}],attrs:{type:"radio",id:"owner",value:"owner"},domProps:{checked:e._q(e.role,"owner")},on:{change:function(t){e.role="owner"}}}),n("label",{attrs:{for:"owner"}},[e._v("Owner")]),n("br"),n("br"),n("button",{on:{click:e.inviteMember}},[e._v("Invite Member")])]):e._e()},Ge=[],Ue={data:function(){return{team:null,users:[],isDataReady:!1,email:"",firstName:"",lastName:"",role:""}},created:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V.a.all([this.getTeam()]);case 2:this.isDataReady=!0;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getTeam:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y("admin/get-team",{id:this.$route.params.id});case 2:t=e.sent,n=t.team,r=t.users,this.team=n,this.users=r;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),inviteMember:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y("admin/invite-member",{email:this.email,firstName:this.firstName,lastName:this.lastName,role:this.role,teamId:this.$route.params.id});case 2:return t=e.sent,t.team,t.users,this.email="",this.firstName="",this.lastName="",this.role="",e.next=11,this.getTeam();case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},ze=Ue,Le=Object(l["a"])(ze,$e,Ge,!1,null,"2da8c740",null),qe=Le.exports,Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"booking-demo"},[n("div",{staticClass:"title"},[e._v("Booking Demo")]),n("div",{staticClass:"first-row"},[n("portal",{attrs:{socketRoomId:e.socketRoomId}}),e.isDataReady?n("div",{staticClass:"button-text-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.room.buttonStartText,expression:"room.buttonStartText"}],attrs:{placeholder:"Start a conversation"},domProps:{value:e.room.buttonStartText},on:{input:function(t){t.target.composing||e.$set(e.room,"buttonStartText",t.target.value)}}}),n("button",{on:{click:e.updateStartText}},[e._v("Update")])]):e._e(),e.isDataReady?n("div",{staticClass:"questions"},[e._l(e.room.introQuestions,(function(t,r){return n("div",{staticClass:"question-container"},[n("div",{staticClass:"question"},[e._v(e._s(t.questionText))]),e._l(t.answers,(function(t,a){return n("div",{staticClass:"answer",class:e.wasAnswerSelected(r,a)?"selected":""},[e._v(e._s(t.answerText))])}))],2)})),n("br"),e._v("Question: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.questionText,expression:"questionText"}],attrs:{placeholder:"Question",type:"text"},domProps:{value:e.questionText},on:{input:function(t){t.target.composing||(e.questionText=t.target.value)}}}),n("br"),e._v("Mandatory ?: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.isMandatory,expression:"isMandatory"}],attrs:{placeholder:"Mandatory ?",type:"checkbox"},domProps:{checked:Array.isArray(e.isMandatory)?e._i(e.isMandatory,null)>-1:e.isMandatory},on:{change:function(t){var n=e.isMandatory,r=t.target,a=!!r.checked;if(Array.isArray(n)){var o=null,s=e._i(n,o);r.checked?s<0&&(e.isMandatory=n.concat([o])):s>-1&&(e.isMandatory=n.slice(0,s).concat(n.slice(s+1)))}else e.isMandatory=a}}}),n("br"),e._l(e.answerTexts,(function(t,r){return[n("input",{directives:[{name:"model",rawName:"v-model",value:e.answerTexts[r],expression:"answerTexts[i]"}],attrs:{placeholder:"Answer "+(r+1),type:"text"},domProps:{value:e.answerTexts[r]},on:{input:function(t){t.target.composing||e.$set(e.answerTexts,r,t.target.value)}}}),n("br")]})),n("button",{on:{click:e.submitNewQuestion}},[e._v("Add New Question")])],2):e._e()],1),n("div",{staticClass:"second-row"},[n("div",{staticClass:"col"},[n("button",{class:"screen1-1.PNG"==e.selectedImageName?"selected":"",on:{click:function(t){return e.changeRemotePicture("screen1-1.PNG")}}},[e._v("Screen 1-1")]),n("button",{class:"screen1-2.PNG"==e.selectedImageName?"selected":"",on:{click:function(t){return e.changeRemotePicture("screen1-2.PNG")}}},[e._v("Screen 1-2")]),n("button",{class:"screen2.PNG"==e.selectedImageName?"selected":"",on:{click:function(t){return e.changeRemotePicture("screen2.PNG")}}},[e._v("Screen 2")]),n("button",{staticClass:"sublevel",class:"igloo1.jpg"==e.selectedImageName?"selected":"",on:{click:function(t){return e.changeRemotePicture("igloo1.jpg")}}},[e._v("Igloo1")]),n("button",{staticClass:"sublevel",class:"igloo2.jpg"==e.selectedImageName?"selected":"",on:{click:function(t){return e.changeRemotePicture("igloo2.jpg")}}},[e._v("Igloo2")]),n("button",{staticClass:"sublevel",class:"cloud-room1.jpg"==e.selectedImageName?"selected":"",on:{click:function(t){return e.changeRemotePicture("cloud-room1.jpg")}}},[e._v("Cloud Room 1")]),n("button",{staticClass:"sublevel",class:"cloud-room2.jpg"==e.selectedImageName?"selected":"",on:{click:function(t){return e.changeRemotePicture("cloud-room2.jpg")}}},[e._v("Cloud Room 2")]),n("button",{staticClass:"sublevel",class:"warehouse1.jpg"==e.selectedImageName?"selected":"",on:{click:function(t){return e.changeRemotePicture("warehouse1.jpg")}}},[e._v("Warehouse 1")]),n("button",{staticClass:"sublevel",class:"warehouse2.jpg"==e.selectedImageName?"selected":"",on:{click:function(t){return e.changeRemotePicture("warehouse2.jpg")}}},[e._v("Warehouse 2")]),n("button",{class:"screen3.PNG"==e.selectedImageName?"selected":"",on:{click:function(t){return e.changeRemotePicture("screen3.PNG")}}},[e._v("Screen 3")]),n("button",{class:"screen4.PNG"==e.selectedImageName?"selected":"",on:{click:function(t){return e.changeRemotePicture("screen4.PNG")}}},[e._v("Screen 4")]),n("button",{class:"screen5.PNG"==e.selectedImageName?"selected":"",on:{click:function(t){return e.changeRemotePicture("screen5.PNG")}}},[e._v("Screen 5")]),n("button",{class:"screen6.PNG"==e.selectedImageName?"selected":"",on:{click:function(t){return e.changeRemotePicture("screen6.PNG")}}},[e._v("Screen 6")]),n("button",{class:"screen7.PNG"==e.selectedImageName?"selected":"",on:{click:function(t){return e.changeRemotePicture("screen7.PNG")}}},[e._v("Screen 7")]),n("button",{class:"screen8.PNG"==e.selectedImageName?"selected":"",on:{click:function(t){return e.changeRemotePicture("screen8.PNG")}}},[e._v("Screen 8")])]),n("div",{staticClass:"col"},[null!=e.selectedImageName?n("img",{staticClass:"preview-picture",attrs:{src:e.getImageUrl(e.selectedImageName)}}):e._e()])])])},We=[],Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isDataReady?n("div",{staticClass:"c-portal"},[n("div",{staticClass:"top-section"},[n("a",{attrs:{href:e.previewLink,target:"_blank"}},[e._v("Preview")]),n("div",{staticClass:"square-counter waiting-convo-nb"},[e._v(e._s(e.waitingConvos.length))]),n("div",{staticClass:"square-counter total-convo-nb"},[e._v(e._s(this.totalConvos))])]),n("div",{staticClass:"container-flex"},[n("div",{staticClass:"status-panel"},[null==e.store.connectedRoom?[n("div",{staticClass:"text"},[e._v("You are offline")]),n("button",{staticClass:"green",on:{click:function(t){return e.joinRoom()}}},[e._v("Join Room")])]:null==e.store.connectedConvo?[n("div",{staticClass:"text green"},[e._v("You are online")]),e.store.connectedRoom.socketRoomId!=e.socketRoomId?n("div",{staticClass:"text"},[e._v("Connected to another room ("+e._s(e.store.connectedRoom.socketRoomId)+")")]):e._e(),n("button",{staticClass:"grey",on:{click:function(t){return e.leaveRoom()}}},[e._v("Leave Room")])]:[n("video",{staticClass:"client-video",attrs:{muted:"muted",playsinline:"playsinline"},domProps:{muted:!0}}),0==e.peerConnectionFinalized?n("div",{staticClass:"text"},[e._v("Connecting...")]):n("div",{staticClass:"text connected"},[e._v("Connected to a visitor.")]),n("button",{staticClass:"grey",on:{click:function(t){return e.endConvo()}}},[e._v("End Conversation")])]],2),n("div",{staticClass:"action-panel"},[null!=e.store.connectedRoom&&null==e.store.connectedConvo&&e.waitingConvos.length>0?[0==e.isFirstContact?[e._m(0),n("button",{on:{click:function(t){e.recordVideo=!0,e.nextConvo()}}},[e._v("Video Call")]),n("button",{staticClass:"border green",on:{click:function(t){e.recordVideo=!1,e.nextConvo()}}},[e._v("Voice Only")])]:[n("div",{staticClass:"big-text"},[e._v("Connecting...")])]]:null!=e.store.connectedConvo&&1==e.hasAcceptedCall?[n("div",{staticClass:"text"},[e._v(e._s(e.recordVideo?"Your Camera is ON":"Your Camera is OFF"))]),e.recordVideo?[n("button",{staticClass:"border grey",on:{click:function(t){e.recordVideo=!e.recordVideo,e.updateUserMediaStream()}}},[e._v("Turn Video OFF")])]:[n("button",{staticClass:"border green",on:{click:function(t){e.recordVideo=!e.recordVideo,e.updateUserMediaStream()}}},[e._v("Turn Video ON")])]]:null!=e.store.connectedConvo&&0==e.hasAcceptedCall?[0==e.isFirstContact?[n("div",{staticClass:"text"},[e._v("Please reconnect")]),n("button",{on:{click:function(t){e.recordVideo=!0,e.answerCall()}}},[e._v("Reconnect with Video")]),n("button",{staticClass:"border green",on:{click:function(t){e.recordVideo=!1,e.answerCall()}}},[e._v("Reconnect with Voice")])]:[n("div",{staticClass:"big-text"},[e._v("Connecting...")])]]:[0==e.waitingConvos.length?n("div",{staticClass:"big-text"},[e._v("No callers")]):n("div",{staticClass:"big-text"},[n("b",[e._v("Someone is calling")])])]],2)])]):e._e()},Je=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text"},[n("b",[e._v("Someone is calling")])])}],He=n("8ac7"),Be=n.n(He),Qe=n("d404"),Ke=n.n(Qe);window.req=n("b8ac"),window.webNotification=Ke.a;var Xe=new Audio("/sounds/alarm.mp3");Xe.loop=!0;var Ze=null,et={iceServers:[{urls:["stun:ss-turn1.xirsys.com"]},{urls:"turn:104.248.158.23:3478",credential:"gsFu3kkpFB2aMWih",username:"Silverchat"}]},tt=null,nt=Math.round(1e6*Math.random()),rt={props:["socketRoomId"],data:function(){return{isFirstContact:!1,isDataReady:!1,newRoomName:"",room:null,convos:[],incomingSignal:null,recordVideo:!1,recordAudio:!0,socketConnectedToRoom:!1,socketConnectedToConvo:!1,isConnectionEstablished:!1,hasAcceptedCall:!1,lastClientSeed:null,connectedSeed:null,mySeed:null,clientSocketId:null,mySignals:[],lastPeerSetupDate:null,totalConvos:null,peerConnectionFinalized:!1}},created:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.logAsGuestIf();case 2:return this.socketSetup(),e.next=5,this.fetchAllData();case 5:return e.next=7,V.a.all([this.socketConnectToRoom(),this.socketConnectToConvo()]);case 7:return e.next=9,this.getStats();case 9:this.isDataReady=!0;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{fetchAllData:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V.a.all([this.storeConnectedRoom(),Y("admin/get-room",{socketRoomId:this.socketRoomId})]);case 2:t=e.sent,n=Object(M["a"])(t,2),n[0],r=n[1],a=r.room,o=r.convos,this.room=a,this.convos=o;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),socketConnectToRoom:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==this.store.connectedRoom||0!=this.socketConnectedToRoom){e.next=4;break}return Ke.a.requestPermission(),this.socketConnectedToRoom=!0,e.abrupt("return",H("admin/join-room",{}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),socketConnectToConvo:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==this.store.connectedConvo||0!=this.socketConnectedToConvo){e.next=3;break}return this.socketConnectedToConvo=!0,e.abrupt("return",H("setup-convos",{}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),simplePeerSetup:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.peerConnectionFinalized=!1,!(null==this.lastPeerSetupDate||ee()()-this.lastPeerSetupDate>2e3)){e.next=5;break}this.lastPeerSetupDate=ee()(),e.next=6;break;case 5:return e.abrupt("return");case 6:return this.mySeed=Math.round(1e6*Math.random()),console.log("My Seed: ",this.mySeed),this.lastClientSeed=null,this.connectedSeed=null,this.mySignals=[],this.isConnectionEstablished=!1,null!=Ze&&Ze.destroy(),e.prev=13,e.next=16,navigator.mediaDevices.getUserMedia({video:this.recordVideo,audio:this.recordAudio});case 16:tt=e.sent,e.next=25;break;case 19:return e.prev=19,e.t0=e["catch"](13),console.log("e: ",e.t0),e.next=24,navigator.mediaDevices.getUserMedia({video:!1,audio:!0});case 24:tt=e.sent;case 25:Ze=new Be.a({initiator:!0,trickle:!0,stream:tt,config:et}),this.store.peer=Ze,window.thePeer=Ze,Ze.on("stream",(function(e){console.log("receiving the vid");var t=document.querySelector("video");"srcObject"in t?t.srcObject=e:t.src=window.URL.createObjectURL(e),t.play(),t.muted=!1})),Ze.on("error",(function(e){return console.log("peer error: ",e)})),Ze.on("signal",function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("MY SIGNAL:  ",D()(n)),t.mySignals.push(n),1!=t.socketConnectedToConvo){e.next=5;break}return e.next=5,H("transmit-signal",{signal:n,seed:t.mySeed,senderSocketId:W()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ze.on("connect",(function(){console.log("I'M CONNECTED !"),t.peerConnectionFinalized=!0,t.sendPeerMessage({native:!0,method:"adminName",data:t.store.user.firstName}),1==t.recordVideo&&t.sendPeerMessage({native:!0,method:"adminShowProfile",data:!1})})),Ze.on("close",Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("CONNECTION WAS CLOSED !!"),e.next=3,t.simplePeerSetup();case 3:case"end":return e.stop()}}),e)}))));case 32:case"end":return e.stop()}}),e,this,[[13,19]])})));function t(){return e.apply(this,arguments)}return t}(),sendPeerMessage:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Ze.send(D()(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),updateUserMediaStream:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:0==this.recordVideo?this.sendPeerMessage({native:!0,method:"adminShowProfile",data:!0}):this.sendPeerMessage({native:!0,method:"adminShowProfile",data:!1});try{Ze.removeStream(tt)}catch(n){tt=null}finally{setTimeout(Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:t.recordVideo,audio:t.recordAudio});case 2:tt=e.sent,console.log("new stream: ",tt),e.prev=4,Ze.addStream(tt),e.next=13;break;case 8:return e.prev=8,e.t0=e["catch"](4),e.next=12,t.simplePeerSetup();case 12:console.log("RESETING LAST RESORT: ");case 13:case"end":return e.stop()}}),e,null,[[4,8]])}))),10)}case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),emitStoredSignals:function(){if(console.log("emit my stored signals: ",this.mySignals.length),0!=this.mySignals.length)for(var e=0;e<this.mySignals.length;++e){var t=this.mySignals[e];H("transmit-signal",{signal:t,seed:this.mySeed,senderSocketId:W()})}},socketSetup:function(){var e=this;Q("admin/request-for-signal",function(){var t=Object($["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(P["a"])(n),console.log("receiving request-for-signal"),1!=e.isConnectionEstablished){t.next=8;break}return console.log("connection already established, reconstructing peer"),t.next=6,e.simplePeerSetup();case 6:t.next=9;break;case 8:e.emitStoredSignals();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Q("admin/emit-signal",function(){var t=Object($["a"])(regeneratorRuntime.mark((function t(n){var r,a,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=n.signal,a=n.seed,o=n.returnSeed,s=n.senderSocketId,console.log("returnSeed: ",o),o==e.mySeed){t.next=5;break}return console.log("Unknown return Seed"),t.abrupt("return");case 5:if(console.log("OTHER SIGNAL: ",r),console.log("seed: ",a),console.log("this.connectedSeed: ",e.connectedSeed),e.lastClientSeed=a,e.clientSocketId=s,e.connectedSeed!=a){t.next=15;break}console.log("CONCAT NEW SIGNAL"),Ze.signal(r),t.next=24;break;case 15:if(1!=e.isConnectionEstablished){t.next=21;break}return console.log("connection already established, reconstructing peer"),t.next=19,e.simplePeerSetup();case 19:t.next=24;break;case 21:console.log("FIRST SIGNAL"),e.incomingSignal=r,e.tryConnectIncomingSignal();case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Q("admin/notify-new-convo",function(){var t=Object($["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=n.convo,console.log("NEW CONVO: ",r),e.convos.push(r),t.next=5,e.getStats();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Q("user-disconnected",(function(t){var n=t.id;console.log("THIS SOCKET ID DISCONNECTED: ",n),e.peerConnectionFinalized=!1}))},tryConnectIncomingSignal:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:1==this.hasAcceptedCall&&null!=this.incomingSignal&&(Ze.signal(this.incomingSignal),this.isConnectionEstablished=!0,this.incomingSignal=null,this.connectedSeed=this.lastClientSeed);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),joinRoom:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y("admin/join-room",{socketRoomId:this.socketRoomId});case 2:return e.next=4,this.fetchAllData();case 4:return e.next=6,this.socketConnectToRoom();case 6:Ke.a.requestPermission();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),endConvo:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y("admin/end-convo",{});case 2:location.reload();case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),nextConvo:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isFirstContact=!0,e.next=3,this.simplePeerSetup();case 3:return e.next=5,Y("admin/next-convo",{});case 5:return e.next=7,this.fetchAllData();case 7:return this.hasAcceptedCall=!0,e.next=10,this.socketConnectToConvo();case 10:this.emitStoredSignals();case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),leaveRoom:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y("admin/leave-room",{});case 2:return e.next=4,this.fetchAllData();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),answerCall:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isFirstContact=!0,e.next=3,this.simplePeerSetup();case 3:this.hasAcceptedCall=!0;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getStats:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y("get-room-stats",{roomId:this.room._id});case 2:t=e.sent,n=t.totalConvos,this.totalConvos=n;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},computed:{waitingConvos:function(){var e=this.convos.filter((function(e){return"waiting"==e.state}));if(e.length>0&&null!=this.store.connectedRoom&&null==this.store.connectedConvo)try{Xe.play(),Ke.a.showNotification("Someone calling...",{body:"".concat(e.length," ").concat(1==e.length?"visitor":"visitors"," sent a request to connect"),tag:"".concat(nt,"/").concat(e.length),vibrate:[100,160,220,320]})}catch(t){}return e},previewLink:function(){return"https://client.silverchat.co/?id="+this.room.socketRoomId}},watch:{isFirstContact:function(e){1==e&&(Xe.currentTime=0,Xe.pause())}}},at=rt,ot=(n("e074"),Object(l["a"])(at,Ye,Je,!1,null,"016e5ba6",null)),st=ot.exports,it={components:{portal:st},data:function(){return{questionText:"",isMandatory:!1,answerTexts:["","",""],room:null,isDataReady:!1,selectedImageName:null}},created:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAllData();case 2:this.isDataReady=!0;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{changeRemotePicture:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selectedImageName=t,this.sendPeerMessage({method:"changePicture",data:this.getImageUrl(t)});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),sendPeerMessage:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.store.peer.send(D()(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),fetchAllData:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y("admin/get-room",{socketRoomId:this.socketRoomId});case 2:t=e.sent,n=t.room,t.convos,this.room=n;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),submitNewQuestion:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y("agent/add-question",{socketRoomId:this.socketRoomId,isMandatory:this.isMandatory,questionText:this.questionText,answerTexts:this.answerTexts});case 2:return e.next=4,this.fetchAllData();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateStartText:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(this.room.buttonStartText),e.next=3,Y("agent/update-button-start-text",{socketRoomId:this.socketRoomId,buttonStartText:this.room.buttonStartText});case 3:return e.next=5,this.fetchAllData();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),wasAnswerSelected:function(e,t){return null!=this.store.connectedConvo&&null!=this.store.connectedConvo.introAnswers&&this.store.connectedConvo.introAnswers[e]==t},getImageUrl:function(e){return"https://silverchat.co//images/booking/"+e}},computed:{socketRoomId:function(){return"demo/booking"}}},ct=it,ut=(n("bf4e"),Object(l["a"])(ct,Fe,We,!1,null,"74ff7067",null)),lt=ut.exports,dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"credentials-layout"},[n("div",{staticClass:"top"},[e._m(0),n("div",{staticClass:"content"},[n(e.page,{tag:"component"})],1)]),n("div",{staticClass:"bottom"})])},mt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logo"},[n("span",{staticClass:"silver"},[e._v("Silver")]),n("span",{staticClass:"chat"},[e._v("chat")])])}],pt={props:["page"],data:function(){return{show:!0}},methods:{}},ht=pt,vt=(n("210a"),Object(l["a"])(ht,dt,mt,!1,null,"7a863e6d",null)),ft=vt.exports,gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("div",{staticClass:"text"},[e._v("Welcome back !")]),n("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{id:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),n("label",{attrs:{for:"email"}},[e._v("Email")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",id:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("label",{attrs:{for:"password"}},[e._v("Password")]),n("button",{attrs:{type:"submit"}},[e._v("Login")]),null!=e.errorMsg?n("div",{staticClass:"error"},[e._v(e._s(e.errorMsg))]):e._e()])])},bt=[],wt={data:function(){return{email:"",password:"",errorMsg:null}},methods:{submit:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=this.password&&""!=this.email){e.next=3;break}return console.log("invalid"),e.abrupt("return");case 3:return e.prev=3,e.next=6,Y("login",{email:this.email,password:this.password});case 6:t=e.sent,n=t.authToken,console.log("authToken: ",n),L.a.set("authToken",n),this.$router.push("/"),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](3),this.errorMsg="Invalid email/password combination";case 16:case"end":return e.stop()}}),e,this,[[3,13]])})));function t(){return e.apply(this,arguments)}return t}()}},kt=wt,xt=(n("0d26"),Object(l["a"])(kt,gt,bt,!1,null,"18f88858",null)),Rt=xt.exports,Ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isDataReady?n("div",{staticClass:"client-layout"},[n("div",{staticClass:"header"},[n("div",{staticClass:"team-name"},[e._v(e._s(e.store.team.name))]),n("div",{staticClass:"user-name"},[e._v("Hi, "+e._s(e.store.user.firstName))])]),n("div",{staticClass:"nav-bar"},[n("router-link",{staticClass:"nav-item",attrs:{to:"/"},on:{click:e.logout}},[e._v("Portal")]),n("router-link",{staticClass:"nav-item",attrs:{to:"/setup"},on:{click:e.logout}},[e._v("Setup")]),n("div",{staticClass:"nav-item last",on:{click:e.logout}},[e._v("Log out")])],1),n("div",{staticClass:"content"},[n(e.page,{tag:"component"})],1)]):e._e()},jt=[],_t={props:["page"],data:function(){return{isDataReady:!1}},created:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.storeMyProfile();case 2:console.log("user: ",this.store.user),null==this.store.user||1==this.store.user.isGuest?this.$router.push("/login"):null==this.store.team&&1==this.store.user.isAdmin&&this.$router.push("/admin"),this.isDataReady=!0;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{logout:function(){this.logoutUser()}}},yt=_t,St=(n("2603"),Object(l["a"])(yt,Ct,jt,!1,null,"4edf8a40",null)),Nt=St.exports,Ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dashboard"},[e._v("Dashboard client hello")])},Tt=[],It={},Pt=It,At=Object(l["a"])(Pt,Ot,Tt,!1,null,null,null),Dt=(At.exports,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"portal"},[n("portal",{attrs:{socketRoomId:e.store.mainRoom.socketRoomId}})],1)}),Mt=[],Et={components:{portal:st}},Vt=Et,$t=(n("ba23"),Object(l["a"])(Vt,Dt,Mt,!1,null,null,null)),Gt=$t.exports,Ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"setup"},[n("div",{staticClass:"box"},[e._v(e._s(e.codeContent))]),n("div",{staticClass:"instruction"},[n("b",[e._v(e._s(e.instruction))])]),e._m(0)])},zt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"instruction"},[e._v("The CSS class of the container is "),n("b",[e._v(".silverchat-container")])])}];function Lt(e){return'\n    <script type="text/javascript">\n      Silverchat={init(d){this.d = d;}}\n    <\/script>\n    <script type="text/javascript">\n      Silverchat.init({roomId: "'.concat(e,'", selector: ".silverchat-location"});\n    <\/script>\n    <script src="').concat("https://client.silverchat.co/",'silverchat-client.js" defer><\/script>\n    <div class="silverchat-container"><div class="silverchat-location"></div></div>\n  ')}function qt(){return"Insert this code as a JavasScript or HTML element."}function Ft(){return'<div class="silverchat-location"></div>'}var Wt={data:function(){return{}},computed:{codeContent:function(){return Lt(this.store.mainRoom.socketRoomId)},instruction:function(){return qt()},example:function(){return Ft()}}},Yt=Wt,Jt=(n("f0bc"),Object(l["a"])(Yt,Ut,zt,!1,null,null,null)),Ht=Jt.exports;r["a"].use(g["a"]);var Bt=new g["a"]({mode:"history",base:"/",routes:[{path:"/",component:Nt,props:{page:Gt}},{path:"/setup",component:Nt,props:{page:Ht}},{path:"/login",component:ft,props:{page:Rt}},{path:"/verify/:verificationToken",component:ft,props:{page:we}},{path:"/admin",component:Ie,props:{page:Ve}},{path:"/admin/teams/:id",component:Ie,props:{page:qe}},{path:"/admin/demo/booking",component:Ie,props:{page:lt}},{path:"/test",redirect:"/test/rooms"},{path:"/test/rooms",component:C,props:{page:_e}},{path:"/test/play/:socketRoomId/client",component:O},{path:"/test/play/:socketRoomId/client/preview",component:C,props:{page:O}},{path:"/test/play/:socketRoomId/admin",component:C,props:{page:ie}},{path:"/websocket-monitor",component:pe}]}),Qt={user:null,team:null,mainRoom:null,connectedConvo:null,connectedRoom:null};r["a"].mixin({data:function(){return{store:Qt}},methods:{storeConnectedRoom:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y("get-current-convo",{});case 2:t=e.sent,null!=t.message?(console.log(t.message),this.store.connectedRoom=null,this.store.connectedConvo=null):(this.store.connectedRoom=t.room,this.store.connectedConvo=t.convo);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),logAsGuestIf:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==L.a.get("authToken")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Y("log-as-guest");case 4:return t=e.sent,n=t.authToken,L.a.set("authToken",n),e.next=9,this.storeMyProfile();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),storeMyProfile:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,null==L.a.get("authToken")){e.next=12;break}return e.next=4,Y("my-profile",{});case 4:t=e.sent,n=t.user,r=t.team,a=t.mainRoom,console.log("Receiving: ",a),this.setUser(n),this.setTeam(r),this.setMainRoom(a);case 12:e.next=16;break;case 14:e.prev=14,e.t0=e["catch"](0);case 16:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(){return e.apply(this,arguments)}return t}(),setUser:function(e){this.store.user=e},setTeam:function(e){this.store.team=e},setMainRoom:function(e){this.store.mainRoom=e},logoutUser:function(){L.a.remove("authToken"),this.$router.push("/login")}},computed:{}}),r["a"].mixin({methods:{moment:ee.a}}),r["a"].config.productionTip=!1,new r["a"]({router:Bt,render:function(e){return e(f)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("458f"),a=n.n(r);a.a},"5c40":function(e,t,n){},"6d25":function(e,t,n){"use strict";var r=n("825a"),a=n.n(r);a.a},"825a":function(e,t,n){},"8a2d":function(e,t,n){"use strict";var r=n("058d"),a=n.n(r);a.a},"9db1":function(e,t,n){},b66f:function(e,t,n){"use strict";var r=n("5c40"),a=n.n(r);a.a},b8ac:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="b8ac"},ba23:function(e,t,n){"use strict";var r=n("12cb"),a=n.n(r);a.a},bf4e:function(e,t,n){"use strict";var r=n("0922"),a=n.n(r);a.a},c3f8:function(e,t,n){},de99:function(e,t,n){},e074:function(e,t,n){"use strict";var r=n("de99"),a=n.n(r);a.a},e288:function(e,t,n){},f0bc:function(e,t,n){"use strict";var r=n("e288"),a=n.n(r);a.a}});
//# sourceMappingURL=app.a1af4517.js.map